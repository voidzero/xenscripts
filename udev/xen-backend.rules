SUBSYSTEM=="xen-backend", KERNEL=="tap*", RUN+="/etc/xen/scripts/blktap $env{ACTION}"
SUBSYSTEM=="xen-backend", KERNEL=="vbd*", RUN+="/etc/xen/scripts/block $env{ACTION}"
SUBSYSTEM=="xen-backend", KERNEL=="vtpm*", RUN+="/etc/xen/scripts/vtpm $env{ACTION}"
SUBSYSTEM=="xen-backend", KERNEL=="vif2-*", RUN+="/etc/xen/scripts/vif2 $env{ACTION}"

SUBSYSTEM=="net",         KERNEL=="vif*-emu",  ACTION=="add",    RUN+="/etc/xen/scripts/xennet add     type_if=tap"
SUBSYSTEM=="net"          KERNEL=="*-emu",     ACTION=="remove", RUN+="/etc/xen/scripts/xennet remove  type_if=tap"
SUBSYSTEM=="xen-backend", KERNEL=="vif-*",     ACTION=="online", RUN+="/etc/xen/scripts/xennet online  type_if=vif"
SUBSYSTEM=="xen-backend", KERNEL=="vif*[0-9]", ACTION=="remove", RUN+="/etc/xen/scripts/xennet offline type_if=vif"

SUBSYSTEM=="xen-backend", KERNEL=="vscsi*", RUN+="/etc/xen/scripts/vscsi $env{ACTION}"
SUBSYSTEM=="xen-backend", ACTION=="remove", RUN+="/etc/xen/scripts/xen-hotplug-cleanup"

KERNEL=="evtchn", NAME="xen/%k"
SUBSYSTEM=="xen", KERNEL=="blktap[0-9]*", NAME="xen/%k", MODE="0600"
SUBSYSTEM=="blktap2", KERNEL=="blktap[0-9]*", NAME="xen/blktap-2/%k", MODE="0600"
KERNEL=="blktap-control", NAME="xen/blktap-2/control", MODE="0600"
KERNEL=="gntdev", NAME="xen/%k", MODE="0600"
KERNEL=="pci_iomul", NAME="xen/%k", MODE="0600"
KERNEL=="tapdev[a-z]*", NAME="xen/blktap-2/tapdev%m", MODE="0600"
